<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory Costing Methods</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1500px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            padding: 40px;
        }

        h1 {
            text-align: center;
            color: #f5576c;
            margin-bottom: 10px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
        }

        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: #f5576c;
            text-decoration: none;
            font-weight: 600;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .methods-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .method-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-top: 4px solid #f5576c;
        }

        .method-card.lifo {
            border-top-color: #3b82f6;
        }

        .method-card.wavg {
            border-top-color: #10b981;
        }

        .method-title {
            font-size: 1.4em;
            font-weight: 600;
            color: #f5576c;
            margin-bottom: 10px;
        }

        .method-card.lifo .method-title {
            color: #3b82f6;
        }

        .method-card.wavg .method-title {
            color: #10b981;
        }

        .method-description {
            color: #666;
            margin-bottom: 15px;
        }

        .formula-box {
            background: white;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
        }

        .calculator-section {
            background: #f0f9ff;
            padding: 30px;
            border-radius: 10px;
            margin: 30px 0;
        }

        .calculator-title {
            font-size: 1.5em;
            color: #3b82f6;
            margin-bottom: 20px;
            text-align: center;
        }

        .inventory-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
        }

        .inventory-table th {
            background: #f8f9fa;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            color: #333;
            border-bottom: 2px solid #e0e0e0;
        }

        .inventory-table td {
            padding: 10px 12px;
            border-bottom: 1px solid #e0e0e0;
        }

        .inventory-table tr:hover {
            background: #f8f9fa;
        }

        input[type="number"] {
            width: 80px;
            padding: 6px;
            border: 2px solid #e0e0e0;
            border-radius: 4px;
            font-size: 0.95em;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: #3b82f6;
        }

        button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            margin: 10px 5px;
        }

        button:hover {
            background: #2563eb;
            transform: translateY(-2px);
        }

        button.secondary {
            background: #10b981;
        }

        button.secondary:hover {
            background: #059669;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .result-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #f5576c;
        }

        .result-card.lifo {
            border-left-color: #3b82f6;
        }

        .result-card.wavg {
            border-left-color: #10b981;
        }

        .result-title {
            font-size: 1.2em;
            font-weight: 600;
            color: #f5576c;
            margin-bottom: 15px;
        }

        .result-card.lifo .result-title {
            color: #3b82f6;
        }

        .result-card.wavg .result-title {
            color: #10b981;
        }

        .result-line {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .result-line:last-child {
            border-bottom: none;
        }

        .result-label {
            color: #666;
        }

        .result-value {
            font-weight: 600;
            color: #333;
        }

        .comparison-box {
            background: #fef3c7;
            padding: 25px;
            border-radius: 10px;
            margin: 30px 0;
        }

        .comparison-title {
            font-size: 1.3em;
            color: #92400e;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        .comparison-table th {
            background: #f8f9fa;
            font-weight: 600;
        }

        .note {
            background: #dbeafe;
            border-left: 4px solid #3b82f6;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }

        .note-title {
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 5px;
        }

        @media (max-width: 1200px) {
            .methods-grid,
            .results-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="../index.html" class="back-link">← Back to Exam 2 Home</a>

        <h1>Inventory Costing Methods</h1>
        <p class="subtitle">FIFO, LIFO, and Weighted Average Comparison</p>

        <div class="methods-grid">
            <div class="method-card">
                <div class="method-title">FIFO</div>
                <div class="method-description"><strong>First-In, First-Out:</strong> Assumes oldest inventory is sold first</div>
                <div class="formula-box">
                    Sell oldest costs first<br>
                    EI = newest costs
                </div>
                <ul style="margin-top:10px;margin-left:20px;">
                    <li>Most common method</li>
                    <li>Matches physical flow for most goods</li>
                    <li>Higher NI in rising prices</li>
                    <li>Ending inventory at current costs</li>
                </ul>
            </div>

            <div class="method-card lifo">
                <div class="method-title">LIFO</div>
                <div class="method-description"><strong>Last-In, First-Out:</strong> Assumes newest inventory is sold first</div>
                <div class="formula-box">
                    Sell newest costs first<br>
                    EI = oldest costs
                </div>
                <ul style="margin-top:10px;margin-left:20px;">
                    <li>Not allowed under IFRS</li>
                    <li>Lower NI in rising prices (tax benefit)</li>
                    <li>Better matching (current costs to current revenues)</li>
                    <li>Ending inventory at old costs</li>
                </ul>
            </div>

            <div class="method-card wavg">
                <div class="method-title">Weighted Average</div>
                <div class="method-description"><strong>Average Cost:</strong> Uses average cost of all units available</div>
                <div class="formula-box">
                    Total Cost ÷ Total Units<br>
                    = Cost per Unit
                </div>
                <ul style="margin-top:10px;margin-left:20px;">
                    <li>Smooths out price fluctuations</li>
                    <li>Results between FIFO and LIFO</li>
                    <li>Good for similar homogeneous items</li>
                    <li>Simpler calculation</li>
                </ul>
            </div>
        </div>

        <div class="calculator-section">
            <div class="calculator-title">Interactive Comparison Calculator</div>

            <table class="inventory-table">
                <thead>
                    <tr>
                        <th>Transaction</th>
                        <th>Units</th>
                        <th>Cost per Unit</th>
                        <th>Total Cost</th>
                    </tr>
                </thead>
                <tbody id="inventoryData">
                    <tr>
                        <td><strong>Beginning Inventory</strong></td>
                        <td><input type="number" id="bi-units" value="100"></td>
                        <td>$<input type="number" id="bi-cost" value="10" step="0.01"></td>
                        <td id="bi-total">$1,000</td>
                    </tr>
                    <tr>
                        <td><strong>Purchase 1</strong></td>
                        <td><input type="number" id="p1-units" value="200"></td>
                        <td>$<input type="number" id="p1-cost" value="11" step="0.01"></td>
                        <td id="p1-total">$2,200</td>
                    </tr>
                    <tr>
                        <td><strong>Purchase 2</strong></td>
                        <td><input type="number" id="p2-units" value="150"></td>
                        <td>$<input type="number" id="p2-cost" value="12" step="0.01"></td>
                        <td id="p2-total">$1,800</td>
                    </tr>
                    <tr style="background:#f0fdf4;">
                        <td colspan="3"><strong>Goods Available for Sale</strong></td>
                        <td id="gafs-total" style="font-weight:600;color:#10b981;">$5,000</td>
                    </tr>
                    <tr style="background:#fef3c7;">
                        <td colspan="3"><strong>Units Sold</strong></td>
                        <td><input type="number" id="units-sold" value="280"></td>
                    </tr>
                </tbody>
            </table>

            <div style="text-align:center;">
                <button onclick="calculate()">Calculate All Methods</button>
                <button onclick="loadExample()" class="secondary">Load Different Example</button>
            </div>

            <div id="results" style="display:none;">
                <!-- Results will be inserted here -->
            </div>
        </div>

        <div class="note">
            <div class="note-title">Impact of Rising Prices:</div>
            <div>• <strong>FIFO:</strong> Higher Net Income (sells old, cheap inventory first → lower COGS)</div>
            <div>• <strong>LIFO:</strong> Lower Net Income (sells new, expensive inventory first → higher COGS)</div>
            <div>• <strong>Weighted Avg:</strong> In the middle</div>
        </div>
    </div>

    <script>
        function updateTotals() {
            const biUnits = parseFloat(document.getElementById('bi-units').value) || 0;
            const biCost = parseFloat(document.getElementById('bi-cost').value) || 0;
            const p1Units = parseFloat(document.getElementById('p1-units').value) || 0;
            const p1Cost = parseFloat(document.getElementById('p1-cost').value) || 0;
            const p2Units = parseFloat(document.getElementById('p2-units').value) || 0;
            const p2Cost = parseFloat(document.getElementById('p2-cost').value) || 0;

            document.getElementById('bi-total').textContent = '$' + (biUnits * biCost).toLocaleString('en-US', {minimumFractionDigits: 0});
            document.getElementById('p1-total').textContent = '$' + (p1Units * p1Cost).toLocaleString('en-US', {minimumFractionDigits: 0});
            document.getElementById('p2-total').textContent = '$' + (p2Units * p2Cost).toLocaleString('en-US', {minimumFractionDigits: 0});

            const total = (biUnits * biCost) + (p1Units * p1Cost) + (p2Units * p2Cost);
            document.getElementById('gafs-total').textContent = '$' + total.toLocaleString('en-US', {minimumFractionDigits: 0});
        }

        // Add event listeners to all inputs
        document.querySelectorAll('input[type="number"]').forEach(input => {
            input.addEventListener('input', updateTotals);
        });

        function calculate() {
            const biUnits = parseFloat(document.getElementById('bi-units').value) || 0;
            const biCost = parseFloat(document.getElementById('bi-cost').value) || 0;
            const p1Units = parseFloat(document.getElementById('p1-units').value) || 0;
            const p1Cost = parseFloat(document.getElementById('p1-cost').value) || 0;
            const p2Units = parseFloat(document.getElementById('p2-units').value) || 0;
            const p2Cost = parseFloat(document.getElementById('p2-cost').value) || 0;
            const unitsSold = parseFloat(document.getElementById('units-sold').value) || 0;

            const totalUnits = biUnits + p1Units + p2Units;
            const totalCost = (biUnits * biCost) + (p1Units * p1Cost) + (p2Units * p2Cost);
            const endingUnits = totalUnits - unitsSold;

            // FIFO: Sell oldest first
            let fifoCOGS = 0;
            let unitsRemaining = unitsSold;

            if (unitsRemaining > 0) {
                const fromBI = Math.min(unitsRemaining, biUnits);
                fifoCOGS += fromBI * biCost;
                unitsRemaining -= fromBI;
            }
            if (unitsRemaining > 0) {
                const fromP1 = Math.min(unitsRemaining, p1Units);
                fifoCOGS += fromP1 * p1Cost;
                unitsRemaining -= fromP1;
            }
            if (unitsRemaining > 0) {
                const fromP2 = Math.min(unitsRemaining, p2Units);
                fifoCOGS += fromP2 * p2Cost;
                unitsRemaining -= fromP2;
            }
            const fifoEI = totalCost - fifoCOGS;

            // LIFO: Sell newest first
            let lifoCOGS = 0;
            unitsRemaining = unitsSold;

            if (unitsRemaining > 0) {
                const fromP2 = Math.min(unitsRemaining, p2Units);
                lifoCOGS += fromP2 * p2Cost;
                unitsRemaining -= fromP2;
            }
            if (unitsRemaining > 0) {
                const fromP1 = Math.min(unitsRemaining, p1Units);
                lifoCOGS += fromP1 * p1Cost;
                unitsRemaining -= fromP1;
            }
            if (unitsRemaining > 0) {
                const fromBI = Math.min(unitsRemaining, biUnits);
                lifoCOGS += fromBI * biCost;
                unitsRemaining -= fromBI;
            }
            const lifoEI = totalCost - lifoCOGS;

            // Weighted Average
            const avgCostPerUnit = totalCost / totalUnits;
            const wavgCOGS = avgCostPerUnit * unitsSold;
            const wavgEI = avgCostPerUnit * endingUnits;

            const fmt = (num) => num.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});

            const resultsHtml = `
                <div class="results-grid">
                    <div class="result-card">
                        <div class="result-title">FIFO Results</div>
                        <div class="result-line">
                            <span class="result-label">Cost of Goods Sold:</span>
                            <span class="result-value">$${fmt(fifoCOGS)}</span>
                        </div>
                        <div class="result-line">
                            <span class="result-label">Ending Inventory:</span>
                            <span class="result-value">$${fmt(fifoEI)}</span>
                        </div>
                        <div class="result-line">
                            <span class="result-label">Units in EI:</span>
                            <span class="result-value">${endingUnits} units</span>
                        </div>
                    </div>

                    <div class="result-card lifo">
                        <div class="result-title">LIFO Results</div>
                        <div class="result-line">
                            <span class="result-label">Cost of Goods Sold:</span>
                            <span class="result-value">$${fmt(lifoCOGS)}</span>
                        </div>
                        <div class="result-line">
                            <span class="result-label">Ending Inventory:</span>
                            <span class="result-value">$${fmt(lifoEI)}</span>
                        </div>
                        <div class="result-line">
                            <span class="result-label">Units in EI:</span>
                            <span class="result-value">${endingUnits} units</span>
                        </div>
                    </div>

                    <div class="result-card wavg">
                        <div class="result-title">Weighted Avg Results</div>
                        <div class="result-line">
                            <span class="result-label">Avg Cost per Unit:</span>
                            <span class="result-value">$${fmt(avgCostPerUnit)}</span>
                        </div>
                        <div class="result-line">
                            <span class="result-label">Cost of Goods Sold:</span>
                            <span class="result-value">$${fmt(wavgCOGS)}</span>
                        </div>
                        <div class="result-line">
                            <span class="result-label">Ending Inventory:</span>
                            <span class="result-value">$${fmt(wavgEI)}</span>
                        </div>
                        <div class="result-line">
                            <span class="result-label">Units in EI:</span>
                            <span class="result-value">${endingUnits} units</span>
                        </div>
                    </div>
                </div>

                <div class="comparison-box">
                    <div class="comparison-title">Side-by-Side Comparison</div>
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Metric</th>
                                <th>FIFO</th>
                                <th>LIFO</th>
                                <th>Weighted Avg</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>COGS</strong></td>
                                <td>$${fmt(fifoCOGS)}</td>
                                <td>$${fmt(lifoCOGS)}</td>
                                <td>$${fmt(wavgCOGS)}</td>
                            </tr>
                            <tr>
                                <td><strong>Ending Inventory</strong></td>
                                <td>$${fmt(fifoEI)}</td>
                                <td>$${fmt(lifoEI)}</td>
                                <td>$${fmt(wavgEI)}</td>
                            </tr>
                            <tr style="background:#f0fdf4;">
                                <td><strong>COGS + EI (Check)</strong></td>
                                <td>$${fmt(fifoCOGS + fifoEI)}</td>
                                <td>$${fmt(lifoCOGS + lifoEI)}</td>
                                <td>$${fmt(wavgCOGS + wavgEI)}</td>
                            </tr>
                            <tr>
                                <td><strong>Highest COGS?</strong></td>
                                <td>${fifoCOGS >= lifoCOGS && fifoCOGS >= wavgCOGS ? '✓' : ''}</td>
                                <td>${lifoCOGS >= fifoCOGS && lifoCOGS >= wavgCOGS ? '✓' : ''}</td>
                                <td>${wavgCOGS >= fifoCOGS && wavgCOGS >= lifoCOGS ? '✓' : ''}</td>
                            </tr>
                            <tr>
                                <td><strong>Highest EI?</strong></td>
                                <td>${fifoEI >= lifoEI && fifoEI >= wavgEI ? '✓' : ''}</td>
                                <td>${lifoEI >= fifoEI && lifoEI >= wavgEI ? '✓' : ''}</td>
                                <td>${wavgEI >= fifoEI && wavgEI >= lifoEI ? '✓' : ''}</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="note" style="margin-top:20px;">
                        <div class="note-title">Analysis:</div>
                        <div><strong>When prices are rising (like this example):</strong></div>
                        <div>• FIFO has <strong>lowest COGS</strong> (sells old, cheap inventory) → <strong>highest Net Income</strong></div>
                        <div>• LIFO has <strong>highest COGS</strong> (sells new, expensive inventory) → <strong>lowest Net Income</strong> (tax advantage!)</div>
                        <div>• Weighted Average is <strong>in between</strong></div>
                    </div>
                </div>
            `;

            document.getElementById('results').innerHTML = resultsHtml;
            document.getElementById('results').style.display = 'block';
        }

        function loadExample() {
            // Generate random example
            const biUnits = Math.floor(Math.random() * 100) + 50;
            const biCost = Math.floor(Math.random() * 10) + 5;
            const p1Units = Math.floor(Math.random() * 200) + 100;
            const p1Cost = biCost + Math.floor(Math.random() * 3) + 1;
            const p2Units = Math.floor(Math.random() * 150) + 75;
            const p2Cost = p1Cost + Math.floor(Math.random() * 3) + 1;

            const totalUnits = biUnits + p1Units + p2Units;
            const unitsSold = Math.floor(totalUnits * 0.6);

            document.getElementById('bi-units').value = biUnits;
            document.getElementById('bi-cost').value = biCost;
            document.getElementById('p1-units').value = p1Units;
            document.getElementById('p1-cost').value = p1Cost;
            document.getElementById('p2-units').value = p2Units;
            document.getElementById('p2-cost').value = p2Cost;
            document.getElementById('units-sold').value = unitsSold;

            updateTotals();
            calculate();
        }

        // Initial calculation
        updateTotals();
    </script>
</body>
</html>
